jQuery(document).ready(function(e){function i(){var i=(e(window).width()-e(".cd-quick-view").width())/2,s=(e(window).height()-e(".cd-quick-view").height())/2;e(".cd-quick-view").css({top:s,left:i})}function s(e){var i=e.parents(".cd-slider-wrapper").find(".cd-slider"),s=i.children(".selected").removeClass("selected");e.hasClass("cd-next")?s.is(":last-child")?i.children("li").eq(0).addClass("selected"):s.next().addClass("selected"):s.is(":first-child")?i.children("li").last().addClass("selected"):s.prev().addClass("selected")}function t(i){e(".cd-quick-view .cd-slider li").removeClass("selected").find('img[src="'+i+'"]').parent("li").addClass("selected")}function c(i,s,t,c){var d=i.parent(".cd-item"),l=i.offset().top-e(window).scrollTop(),a=i.offset().left,o=i.width(),n=i.height(),r=e(window).width(),w=e(window).height(),v=(r-s)/2,u=s*n/o,h=(w-u)/2,f=t>.8*r?.8*r:t,p=(r-f)/2;"open"===c?(d.addClass("empty-box"),e(".cd-quick-view").css({top:l,left:a,width:o}).velocity({top:h+"px",left:v+"px",width:s+"px"},1e3,[400,20],function(){e(".cd-quick-view").addClass("animate-width").velocity({left:p+"px",width:f+"px"},300,"ease",function(){e(".cd-quick-view").addClass("add-content")})}).addClass("is-visible")):(console.log("close animation"),e(".cd-quick-view").removeClass("add-content").velocity({top:h+"px",left:v+"px",width:s+"px"},300,"ease",function(){e("body").removeClass("overlay-layer"),e(".cd-quick-view").removeClass("animate-width").velocity({top:l,left:a,width:o},500,"ease",function(){e(".cd-quick-view").removeClass("is-visible"),d.removeClass("empty-box")})}))}function d(i,s){console.log("close");var t=e(".cd-close"),d=t.siblings(".cd-slider-wrapper").find(".selected img").attr("src"),l=e(".empty-box").find("img");!e(".cd-quick-view").hasClass("velocity-animating")&&e(".cd-quick-view").hasClass("add-content")&&(l.attr("src",d),c(l,i,s,"close"))}var l=400,a=900;e(".cd-trigger").on("click",function(){var i=e(this).parent(".cd-item").children("img"),s=i.attr("src");e("body").addClass("overlay-layer"),c(i,l,a,"open"),t(s)}),e("body").on("click",function(i){(e(i.target).is(".cd-close")||e(i.target).is("body.overlay-layer"))&&d(l,a)}),e(document).keyup(function(e){"27"==e.which&&d(l,a)}),e(".cd-quick-view").on("click",".cd-slider-navigation a",function(){s(e(this))}),e(window).on("resize",function(){e(".cd-quick-view").hasClass("is-visible")&&window.requestAnimationFrame(i)})});